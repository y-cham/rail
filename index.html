<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>근무 스케줄 및 업무 관리</title>
  <!-- Tailwind CSS CDN을 로드합니다. -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Inter 폰트를 사용합니다. */
    body {
      font-family: 'Inter', sans-serif;
    }
  </style>
</head>
<body class="font-sans m-0 p-0 bg-gray-100 text-gray-800">

  <!-- 첫 번째 페이지: 조 선택 -->
  <div id="pattern-selection-page" class="container max-w-md mx-auto my-20 p-8 bg-white rounded-lg shadow-lg flex flex-col items-center justify-center">
    <h1 class="text-center text-3xl font-extrabold mb-8 text-gray-900">근무조 선택</h1>

    <div class="pattern-select flex flex-col gap-4 mb-8 p-6 bg-blue-50 rounded-lg shadow-inner w-full">
      <label class="flex items-center space-x-3 text-xl text-gray-700">
        <input type="radio" name="selectPattern" value="A" checked class="form-radio h-6 w-6 text-blue-600">
        <span>A조</span>
      </label>
      <label class="flex items-center space-x-3 text-xl text-gray-700">
        <input type="radio" name="selectPattern" value="B" class="form-radio h-6 w-6 text-blue-600">
        <span>B조</span>
      </label>
      <label class="flex items-center space-x-3 text-xl text-gray-700">
        <input type="radio" name="selectPattern" value="C" class="form-radio h-6 w-6 text-blue-600">
        <span>C조</span>
      </label>
      <label class="flex items-center space-x-3 text-xl text-gray-700">
        <input type="radio" name="selectPattern" value="D" class="form-radio h-6 w-6 text-blue-600">
        <span>D조</span>
      </label>
    </div>

    <button id="goToCalendarBtn" class="px-8 py-3 bg-green-500 text-white text-xl font-semibold rounded-lg shadow-md hover:bg-green-600 transition-colors duration-200">
      캘린더 보기
    </button>
  </div>

  <!-- 두 번째 페이지: 캘린더 -->
  <div id="calendar-page" class="container max-w-4xl mx-auto my-5 p-5 bg-white rounded-lg shadow-lg" style="display: none;">
    <h1 class="text-center text-3xl font-extrabold mb-6 text-gray-900">철도 근무 스케줄 캘린더 (<span id="selectedTeamDisplay">A조</span>)</h1>

    <!-- 로딩 메시지 및 사용자 ID 표시 (데이터 저장 기능이 없으므로 메시지 간소화) -->
    <div id="loading-area" class="text-center mt-4 mb-2">
      <div id="loading-message" class="text-gray-600">캘린더 로딩 중...</div>
    </div>

    <!-- 현재 표시 월/년도 및 월 이동 버튼 -->
    <div class="flex justify-between items-center mb-4">
      <button id="prevMonthBtn" class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors duration-200">이전 달</button>
      <div id="currentMonthYear" class="text-center text-xl font-bold text-gray-800"></div>
      <button id="nextMonthBtn" class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors duration-200">다음 달</button>
    </div>

    <!-- 오늘 날짜를 표시하는 영역 -->
    <div id="today-date" class="text-center text-lg font-semibold mb-4 text-blue-600"></div>

    <!-- 요일 라벨 -->
    <div class="day-labels grid grid-cols-7 font-bold text-center mt-5 text-gray-700 text-base py-2 border-b border-gray-300">
      <div>월</div><div>화</div><div>수</div><div>목</div><div>금</div><div>토</div><div>일</div>
    </div>
    <!-- 캘린더 날짜가 표시될 영역 -->
    <div id="calendar" class="grid grid-cols-7 gap-1 mt-2"></div>

    <!-- 하단 버튼: 이전 페이지, 업무 페이지 이동 -->
    <div class="flex justify-between mt-8">
      <button id="backToSelectionBtn" class="px-6 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition-colors duration-200">
        이전 페이지
      </button>
      <button id="goToTasksPageBtn" class="px-6 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-colors duration-200">
        업무 관리
      </button>
    </div>
  </div>

  <!-- 세 번째 페이지: 업무 관리 -->
  <div id="task-page" class="container max-w-4xl mx-auto my-5 p-5 bg-white rounded-lg shadow-lg" style="display: none;">
    <h1 class="text-center text-3xl font-extrabold mb-6 text-gray-900"><span id="taskPageTitle">안내 업무</span> 관리</h1>

    <!-- 업무 섹션 선택 버튼 (안내/매표) -->
    <div class="flex justify-center gap-4 mb-6">
      <button id="showInfoSectionBtn" class="px-6 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors duration-200">안내</button>
      <button id="showTicketingSectionBtn" class="px-6 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors duration-200">매표</button>
    </div>

    <!-- 안내 업무 섹션 -->
    <div id="info-section" class="task-section">
      <h2 class="text-2xl font-bold mb-4 text-gray-800">안내 업무</h2>
      <!-- 주간/야간 선택 버튼 (안내 업무 전용) -->
      <div class="flex justify-center gap-4 mb-4">
        <button id="showInfoDayShiftBtn" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors duration-200">주간</button>
        <button id="showInfoNightShiftBtn" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors duration-200">야간</button>
      </div>

      <!-- 주간 안내 업무 방향 선택 및 목록 -->
      <div id="info-day-shift-container" class="shift-direction-container" style="display: none;">
        <h3 class="text-xl font-semibold mb-3 text-blue-700">주간 방향 선택</h3>
        <div class="flex justify-center gap-4 mb-4">
          <button id="showInfoDayUpboundBtn" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors duration-200">상행</button>
          <button id="showInfoDayDownboundBtn" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors duration-200">하행</button>
        </div>

        <div id="upbound-info-day-shift-tasks" class="shift-tasks-list" style="display: none;">
          <h4 class="text-lg font-medium mb-2 text-gray-700">상행 주간 업무 목록</h4>
          <div class="space-y-3">
            <!-- 안내 주간 공통 업무 -->
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">09:10</span>
              <span class="flex-grow">화장실점검</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">09:10</span>
              <span class="flex-grow">리프트 점검</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">09:10</span>
              <span class="flex-grow">유실물 갯수 확인</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">10:00</span>
              <span class="flex-grow">수유방 점검</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">11:00</span>
              <span class="flex-grow">화장실점검</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">13:00</span>
              <span class="flex-grow">화장실점검</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">14:00</span>
              <span class="flex-grow">수유방점검</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">15:00</span>
              <span class="flex-grow">화장실점검</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">17:00</span>
              <span class="flex-grow">화장실점검</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">17:00</span>
              <span class="flex-grow">유실물 갯수 확인</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
          </div>
        </div>

        <div id="downbound-info-day-shift-tasks" class="shift-tasks-list" style="display: none;">
          <h4 class="text-lg font-medium mb-2 text-gray-700">하행 주간 업무 목록</h4>
          <div class="space-y-3">
            <!-- 안내 주간 공통 업무 -->
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">09:10</span>
              <span class="flex-grow">화장실점검</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">09:10</span>
              <span class="flex-grow">리프트 점검</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">09:10</span>
              <span class="flex-grow">유실물 갯수 확인</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">09:17</span>
              <span class="flex-grow">무궁화 1501 여수EXPO 행</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">09:27</span>
              <span class="flex-grow">KTX산천(금,토,일) 4051 여수EXPO 행</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">09:59</span>
              <span class="flex-grow">KTX 581 여수EXPO 행</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">10:00</span>
              <span class="flex-grow">수유방 점검</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">10:20</span>
              <span class="flex-grow">KTX 505 여수EXPO 행</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">10:27</span>
              <span class="flex-grow">ITX새마을 1081 여수EXPO 행</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">11:00</span>
              <span class="flex-grow">화장실점검</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">11:20</span>
              <span class="flex-grow">S-train 2521 여수EXPO 행</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">11:39</span>
              <span class="flex-grow">KTX산천 507 여수EXPO 행</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">11:39</span>
              <span class="flex-grow">KTX산천(금,토,일) 복합열차 9507 여수EXPO 행</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">12:09</span>
              <span class="flex-grow">SRT 681 여수EXPO 행</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">12:25</span>
              <span class="flex-grow">KTX 585 여수EXPO 행</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">12:39</span>
              <span class="flex-grow">KTX 509</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">13:00</span>
              <span class="flex-grow">화장실점검</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">14:00</span>
              <span class="flex-grow">수유방점검</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">15:00</span>
              <span class="flex-grow">화장실점검</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">17:00</span>
              <span class="flex-grow">화장실점검</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">17:00</span>
              <span class="flex-grow">유실물 갯수 확인</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
          </div>
        </div>
      </div>

      <!-- 야간 안내 업무 방향 선택 및 목록 -->
      <div id="info-night-shift-container" class="shift-direction-container" style="display: none;">
        <h3 class="text-xl font-semibold mb-3 text-blue-700">야간 방향 선택</h3>
        <div class="flex justify-center gap-4 mb-4">
          <button id="showInfoNightUpboundBtn" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors duration-200">상행</button>
          <button id="showInfoNightDownboundBtn" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors duration-200">하행</button>
        </div>

        <div id="upbound-info-night-shift-tasks" class="shift-tasks-list" style="display: none;">
          <h4 class="text-lg font-medium mb-2 text-gray-700">상행 야간 업무 목록</h4>
          <div class="space-y-3">
            <!-- 안내 야간 공통 업무 -->
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">18:40</span>
              <span class="flex-grow">유실물 갯수 확인</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">19:00</span>
              <span class="flex-grow">화장실점검</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">19:00</span>
              <span class="flex-grow">수유방점검</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">19:30</span>
              <span class="flex-grow">직원주차장 폐쇄</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">21:00</span>
              <span class="flex-grow">화장실점검</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">23:00</span>
              <span class="flex-grow">화장실점검</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">06:00</span>
              <span class="flex-grow">화장실점검</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">08:00</span>
              <span class="flex-grow">화장실점검</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">08:00</span>
              <span class="flex-grow">유실물 점검</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
          </div>
        </div>

        <div id="downbound-info-night-shift-tasks" class="shift-tasks-list" style="display: none;">
          <h4 class="text-lg font-medium mb-2 text-gray-700">하행 야간 업무 목록</h4>
          <div class="space-y-3">
            <!-- 안내 야간 공통 업무 -->
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">18:40</span>
              <span class="flex-grow">유실물 갯수 확인</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">19:00</span>
              <span class="flex-grow">화장실점검</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">19:00</span>
              <span class="flex-grow">수유방점검</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">19:30</span>
              <span class="flex-grow">직원주차장 폐쇄</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">21:00</span>
              <span class="flex-grow">화장실점검</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">23:00</span>
              <span class="flex-grow">화장실점검</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">06:00</span>
              <span class="flex-grow">화장실점검</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">08:00</span>
              <span class="flex-grow">화장실점검</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
            <div class="flex items-center p-2 bg-gray-50 rounded-md shadow-sm">
              <span class="font-bold w-16 flex-shrink-0">08:00</span>
              <span class="flex-grow">유실물 점검</span>
              <input type="text" placeholder="메모" class="flex-grow mx-2 p-1 border border-gray-300 rounded-md text-sm">
              <input type="checkbox" class="ml-2 h-5 w-5 text-green-600 rounded">
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 매표 업무 섹션 -->
    <div id="ticketing-section" class="task-section" style="display: none;">
      <h2 class="text-2xl font-bold mb-4 text-gray-800">매표 업무</h2>
      <div class="flex justify-center gap-4 mb-4">
        <button id="showTicketingDayShiftBtn" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors duration-200">주간</button>
        <button id="showTicketingNightShiftBtn" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors duration-200">야간</button>
      </div>

      <div id="ticketing-day-shift-tasks" class="shift-tasks-list">
        <h3 class="text-xl font-semibold mb-3 text-blue-700">주간 업무</h3>
        <div class="space-y-3">
          <!-- 매표 주간 업무를 여기에 추가해주세요. -->
        </div>
      </div>

      <div id="ticketing-night-shift-tasks" class="shift-tasks-list" style="display: none;">
        <h3 class="text-xl font-semibold mb-3 text-blue-700">야간 업무</h3>
        <div class="space-y-3">
          <!-- 매표 야간 업무를 여기에 추가해주세요. -->
        </div>
      </div>
    </div>

    <!-- 업무 페이지에서 캘린더 페이지로 돌아가는 버튼 -->
    <div class="flex justify-center mt-8">
      <button id="backToCalendarBtn" class="px-6 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition-colors duration-200">
        캘린더로 돌아가기
      </button>
    </div>
  </div>

  <script type="module">
    // DOM 요소 참조
    const patternSelectionPage = document.getElementById('pattern-selection-page');
    const calendarPage = document.getElementById('calendar-page');
    const taskPage = document.getElementById('task-page');

    const goToCalendarBtn = document.getElementById('goToCalendarBtn');
    const backToSelectionBtn = document.getElementById('backToSelectionBtn');
    const selectedTeamDisplay = document.getElementById('selectedTeamDisplay');
    const calendarEl = document.getElementById('calendar');
    const todayDateEl = document.getElementById('today-date');
    const currentMonthYearEl = document.getElementById('currentMonthYear');
    const prevMonthBtn = document.getElementById('prevMonthBtn');
    const nextMonthBtn = document.getElementById('nextMonthBtn');

    // 업무 페이지 관련 DOM 요소
    const goToTasksPageBtn = document.getElementById('goToTasksPageBtn');
    const backToCalendarBtn = document.getElementById('backToCalendarBtn');
    const taskPageTitle = document.getElementById('taskPageTitle');

    const infoSection = document.getElementById('info-section');
    const ticketingSection = document.getElementById('ticketing-section');
    const showInfoSectionBtn = document.getElementById('showInfoSectionBtn');
    const showTicketingSectionBtn = document.getElementById('showTicketingSectionBtn');

    // 안내 업무 - 주간/야간 선택 버튼
    const showInfoDayShiftBtn = document.getElementById('showInfoDayShiftBtn');
    const showInfoNightShiftBtn = document.getElementById('showInfoNightShiftBtn');

    // 안내 업무 - 주간/야간 시프트 컨테이너
    const infoDayShiftContainer = document.getElementById('info-day-shift-container');
    const infoNightShiftContainer = document.getElementById('info-night-shift-container');

    // 안내 업무 - 주간 시프트 내 상행/하행 버튼
    const showInfoDayUpboundBtn = document.getElementById('showInfoDayUpboundBtn');
    const showInfoDayDownboundBtn = document.getElementById('showInfoDayDownboundBtn');
    // 안내 업무 - 야간 시프트 내 상행/하행 버튼
    const showInfoNightUpboundBtn = document.getElementById('showInfoNightUpboundBtn');
    const showInfoNightDownboundBtn = document.getElementById('showInfoNightDownboundBtn');

    // 안내 업무 - 실제 업무 목록 (상행/하행, 주간/야간 조합)
    const upboundInfoDayShiftTasks = document.getElementById('upbound-info-day-shift-tasks');
    const downboundInfoDayShiftTasks = document.getElementById('downbound-info-day-shift-tasks');
    const upboundInfoNightShiftTasks = document.getElementById('upbound-info-night-shift-tasks');
    const downboundInfoNightShiftTasks = document.getElementById('downbound-info-night-shift-tasks');

    // 매표 업무 교대 근무
    const ticketingDayShiftTasks = document.getElementById('ticketing-day-shift-tasks');
    const ticketingNightShiftTasks = document.getElementById('ticketing-night-shift-tasks');
    const showTicketingDayShiftBtn = document.getElementById('showTicketingDayShiftBtn');
    const showTicketingNightShiftBtn = document.getElementById('showTicketingNightShiftBtn');


    // 전역 변수
    let currentDisplayDate = new Date(); // 현재 캘린더에 표시될 년도와 월을 추적
    let selectedPatternKey = 'A'; // 선택된 조 (기본값 A)

    // 각 근무 패턴 정의 (약어 적용)
    const shiftPatterns = {
      'A': ['주', '야', '비', '휴'], // 주간, 야간, 비번, 휴무
      'B': ['야', '비', '휴', '주'],
      'C': ['비', '휴', '주', '야'],
      'D': ['휴', '주', '야', '비']
    };

    // 7월 15일 (2025년)을 기준으로 각 조가 가져야 할 근무 형태 (약어 적용)
    const targetShiftForJuly15_2025 = {
      'A': '휴', // 휴무
      'B': '주', // 주간
      'C': '야', // 야간
      'D': '비'  // 비번
    };

    // 페이지 전환 함수
    function showPage(pageId) {
      patternSelectionPage.style.display = 'none';
      calendarPage.style.display = 'none';
      taskPage.style.display = 'none';
      document.getElementById(pageId).style.display = 'block';
    }

    // 캘린더의 날짜 부분만 렌더링하는 함수
    function renderCalendarDays() {
      const displayYear = currentDisplayDate.getFullYear();
      const displayMonth = currentDisplayDate.getMonth();

      const today = new Date();
      const currentYear = today.getFullYear();
      const currentMonth = today.getMonth();
      const currentDayOfMonth = today.getDate();

      const firstDayOfMonth = new Date(displayYear, displayMonth, 1);
      const lastDayOfMonth = new Date(displayYear, displayMonth + 1, 0);
      const daysInMonth = lastDayOfMonth.getDate();

      calendarEl.innerHTML = ''; // 기존 날짜 요소 모두 제거

      const currentShiftPattern = shiftPatterns[selectedPatternKey];
      const patternLength = currentShiftPattern.length;

      let startingShiftIndexForFirstDayOfMonth = 0;

      // 2025년 7월 (month 6)인 경우에만 7월 15일 기준 근무 형태를 적용합니다.
      if (displayYear === 2025 && displayMonth === 6) {
        const targetShift = targetShiftForJuly15_2025[selectedPatternKey];
        const targetShiftIndex = currentShiftPattern.indexOf(targetShift);
        if (targetShiftIndex !== -1) {
          const daysOffsetFromFirstToJuly15 = 14;
          startingShiftIndexForFirstDayOfMonth = (targetShiftIndex - (daysOffsetFromFirstToJuly15 % patternLength) + patternLength) % patternLength;
        }
      }

      let emptyStartDays = (firstDayOfMonth.getDay() + 6) % 7; // 월요일 시작 보정
      for (let i = 0; i < emptyStartDays; i++) {
        const blank = document.createElement('div');
        blank.className = 'day-placeholder bg-gray-50 rounded-md';
        calendarEl.appendChild(blank);
      }

      for (let i = 1; i <= daysInMonth; i++) {
        const dayEl = document.createElement('div');
        dayEl.className = 'day bg-blue-50 p-2 rounded-md min-h-[80px] relative cursor-pointer hover:bg-blue-100 transition-colors duration-200';

        // 오늘 날짜를 강조합니다. (현재 시스템 날짜 기준)
        if (i === currentDayOfMonth && displayMonth === currentMonth && displayYear === currentYear) {
          dayEl.classList.add('border-2', 'border-blue-500', 'bg-blue-200', 'shadow-md');
        }

        const shiftIndexForCurrentDay = (startingShiftIndexForFirstDayOfMonth + (i - 1)) % patternLength;
        let shift = currentShiftPattern[shiftIndexForCurrentDay]; // 기본 패턴 근무

        dayEl.innerHTML = `
          <span class="absolute top-1 right-2 text-sm text-gray-600 font-medium">${i}</span>
          <div class="shift mt-5 font-bold text-base text-center text-blue-800">${shift}</div>
        `;

        dayEl.addEventListener('click', () => {
          const validShifts = ['주', '야', '비', '휴', '지주', '지야', '초주', '초야'];
          const newShift = prompt(`근무 형태를 입력하세요 (${validShifts.join('/')}):`, shift);
          
          if (newShift !== null && validShifts.includes(newShift)) {
            dayEl.querySelector('.shift').textContent = newShift;
            // **주의: 이 변경사항은 저장되지 않습니다. 페이지를 새로고침하면 초기화됩니다.**
          } else if (newShift !== null) {
            alert(`유효한 근무 형태를 입력해주세요: ${validShifts.join(', ')}`);
          }
        });

        calendarEl.appendChild(dayEl);
      }
    }

    // 캘린더 구조 (월/년도, 오늘 날짜, 조 표시)를 렌더링하는 함수
    function renderCalendarStructure() {
      const displayYear = currentDisplayDate.getFullYear();
      const displayMonth = currentDisplayDate.getMonth();

      const today = new Date();
      const currentYear = today.getFullYear();
      const currentMonth = today.getMonth();
      const currentDayOfMonth = today.getDate();

      currentMonthYearEl.textContent = `${displayYear}년 ${displayMonth + 1}월`;
      todayDateEl.textContent = `${currentYear}년 ${currentMonth + 1}월 ${currentDayOfMonth}일`;
      selectedTeamDisplay.textContent = `${selectedPatternKey}조`;
    }

    // 캘린더 전체를 로드하고 렌더링하는 메인 함수
    function loadAndRenderCalendar() {
      renderCalendarStructure(); // 정적 구조 렌더링
      renderCalendarDays(); // 날짜 및 근무 형태 렌더링
    }

    // 월 이동 버튼 이벤트 리스너
    prevMonthBtn.addEventListener('click', () => {
      currentDisplayDate.setMonth(currentDisplayDate.getMonth() - 1);
      loadAndRenderCalendar();
    });

    nextMonthBtn.addEventListener('click', () => {
      currentDisplayDate.setMonth(currentDisplayDate.getMonth() + 1);
      loadAndRenderCalendar();
    });

    // "캘린더 보기" 버튼 클릭 이벤트
    goToCalendarBtn.addEventListener('click', () => {
      console.log("캘린더 보기 button clicked!"); // 디버깅을 위한 로그
      const selectedRadio = document.querySelector('input[name="selectPattern"]:checked');
      if (selectedRadio) {
        selectedPatternKey = selectedRadio.value;
        currentDisplayDate = new Date(); // 캘린더 페이지로 이동 시 현재 월로 초기화
        showPage('calendar-page');
        loadAndRenderCalendar();
      } else {
        alert('조를 선택해주세요.');
      }
    });

    // "이전 페이지" 버튼 클릭 이벤트 (캘린더에서 조 선택 페이지로)
    backToSelectionBtn.addEventListener('click', () => {
      showPage('pattern-selection-page'); // 조 선택 페이지로 돌아감
    });

    // 업무 페이지의 섹션 및 교대 근무 표시 관리 함수
    function showTaskSection(sectionId) {
      infoSection.style.display = 'none';
      ticketingSection.style.display = 'none';
      document.getElementById(sectionId).style.display = 'block';
      taskPageTitle.textContent = (sectionId === 'info-section' ? '안내 업무' : '매표 업무') + ' 관리';

      // 섹션 변경 시 기본적으로 첫 번째 하위 섹션 (안내: 주간, 매표: 주간)을 표시
      if (sectionId === 'info-section') {
        showInfoShiftType('day'); // 안내는 주간 먼저
      } else {
        showTicketingShiftTasks('day'); // 매표는 주간 먼저
      }
    }

    // 안내 업무 내 주간/야간 교대 근무 섹션 표시 관리 함수
    function showInfoShiftType(shiftType) {
        infoDayShiftContainer.style.display = 'none';
        infoNightShiftContainer.style.display = 'none';

        if (shiftType === 'day') {
            infoDayShiftContainer.style.display = 'block';
            // 주간 선택 시 상행 먼저 표시
            showInfoDirection('day', 'upbound');
        } else if (shiftType === 'night') {
            infoNightShiftContainer.style.display = 'block';
            // 야간 선택 시 상행 먼저 표시
            showInfoDirection('night', 'upbound');
        }
    }

    // 안내 업무 내 상행/하행 업무 목록 표시 관리 함수
    function showInfoDirection(shiftType, direction) {
        // 모든 안내 업무 목록 숨김
        upboundInfoDayShiftTasks.style.display = 'none';
        downboundInfoDayShiftTasks.style.display = 'none';
        upboundInfoNightShiftTasks.style.display = 'none';
        downboundInfoNightShiftTasks.style.display = 'none';

        // 선택된 업무 목록만 표시
        if (shiftType === 'day' && direction === 'upbound') {
            upboundInfoDayShiftTasks.style.display = 'block';
        } else if (shiftType === 'day' && direction === 'downbound') {
            downboundInfoDayShiftTasks.style.display = 'block';
        } else if (shiftType === 'night' && direction === 'upbound') {
            upboundInfoNightShiftTasks.style.display = 'block';
        } else if (shiftType === 'night' && direction === 'downbound') {
            downboundInfoNightShiftTasks.style.display = 'block';
        }
    }

    // 매표 업무 교대 근무 목록 표시 관리 함수
    function showTicketingShiftTasks(shiftType) {
      ticketingDayShiftTasks.style.display = 'none';
      ticketingNightShiftTasks.style.display = 'none';

      if (shiftType === 'day') {
        ticketingDayShiftTasks.style.display = 'block';
      } else if (shiftType === 'night') {
        ticketingNightShiftTasks.style.display = 'block';
      }
    }

    // 캘린더에서 업무 페이지로 이동하는 통합 버튼 이벤트 리스너
    goToTasksPageBtn.addEventListener('click', () => {
      showPage('task-page');
      showTaskSection('info-section'); // 기본적으로 안내 업무 섹션을 표시
    });

    // 업무 페이지 내부 섹션 전환 버튼 이벤트 리스너
    showInfoSectionBtn.addEventListener('click', () => showTaskSection('info-section'));
    showTicketingSectionBtn.addEventListener('click', () => showTaskSection('ticketing-section'));

    // 안내 업무 - 주간/야간 버튼 이벤트 리스너
    showInfoDayShiftBtn.addEventListener('click', () => showInfoShiftType('day'));
    showInfoNightShiftBtn.addEventListener('click', () => showInfoShiftType('night'));

    // 안내 업무 - 주간 시프트 내 상행/하행 버튼 이벤트 리스너
    showInfoDayUpboundBtn.addEventListener('click', () => showInfoDirection('day', 'upbound'));
    showInfoDayDownboundBtn.addEventListener('click', () => showInfoDirection('day', 'downbound'));

    // 안내 업무 - 야간 시프트 내 상행/하행 버튼 이벤트 리스너
    showInfoNightUpboundBtn.addEventListener('click', () => showInfoDirection('night', 'upbound'));
    showInfoNightDownboundBtn.addEventListener('click', () => showInfoDirection('night', 'downbound'));

    // 매표 업무 교대 근무 전환 버튼 이벤트 리스너
    showTicketingDayShiftBtn.addEventListener('click', () => showTicketingShiftTasks('day'));
    showTicketingNightShiftBtn.addEventListener('click', () => showTicketingShiftTasks('night'));

    // 업무 페이지에서 캘린더 페이지로 돌아가는 버튼 이벤트 리스너
    backToCalendarBtn.addEventListener('click', () => {
      showPage('calendar-page');
      loadAndRenderCalendar(); // 캘린더 페이지로 돌아갈 때 다시 렌더링하여 최신 상태 유지
    });

    // 초기 페이지 로드 시 조 선택 페이지 표시
    showPage('pattern-selection-page');
  </script>
</body>
</html>
